<!DOCTYPE html>
<html>
<head>
	<title>Table V01</title>
	<meta charset="UTF-8">
<!--===============================================================================================-->	
	<link rel="stylesheet" type="text/css" href="css/main.css">
<!--===============================================================================================-->
</head>
<body>

	<div class="limiter">
		<div class="container-table100">
			<div class="wrap-table100">
				<div class="table100">
					<table>
						<thead>
							<tr class="table100-head">
								<th class="column1">Text</th>
								<th class="column2">Object Type</th>
								<th class="column2">Datei</th>
								<th class="column3">Param Name</th>
								<th class="column4">Param Type</th>
								<th class="column5">Capture</th>
							</tr>
						</thead>
						<tbody id="demo">

						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
	
<script>
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
  if (this.readyState == 4 && this.status == 200) {
	var singleKeys = {0: "text", 1: "object_type", 2: "file_name"};
	var multiKeys = { "params" : {0: "param_name", 1: "param_type", 2: "capture"} };
    var myObj = JSON.parse(this.responseText);
	console.log(myObj);
	for (var step in myObj.steps) {
		span = myObj.steps[step].params.length;
		stringrow = "";
		
		stringrow += '<tr>';
		var spanValue = 1;
		if (span > 1) {
			spanValue = span;
		}
		for (var key in singleKeys) {
			stringrow += '<td rowspan="' + spanValue + '">' + myObj.steps[step][singleKeys[key]] + '</td>';
		}

		for (var key in multiKeys) {

			for (var subkey in multiKeys[key]) {
				if (span == 0) {
					stringrow += '<td></td>';
				}
				else if (span > 0) {				
					stringrow += '<td>' + myObj.steps[step].params[0][multiKeys[key][subkey]] + '</td>';
				}
			}

		}
		stringrow += '</tr>'

		if (span > 1) {
			
			for (var i = 1; i < span; i++ ) {
				stringrow += '<tr>';
				for (var key in multiKeys) {
					for (var subkey in multiKeys[key]) {
						stringrow += '<td>' + myObj.steps[step].params[i][multiKeys[key][subkey]] + '</td>';
					}
				}
				stringrow += '</tr>';
			}
			stringrow += '</tr>';
		}
		
		
		document.getElementById("demo").innerHTML += stringrow;	
	}
    
  }
};
xmlhttp.open("GET", "StepDefinitions.json", true);
xmlhttp.send();
</script>

<p>Take a look at <a href="StepDefinitions.json" target="_blank">StepDefinitions.json</a></p>

</body>
</html>
